# 同時実行制御について説明できる


## 1. 同時実行制御

トランザクションの重要な役割の一つに、同時実行制御(排他制御)があります。

同時実行制御とは何か、何のためにあるものかを、データベース初心者にわかるように説明してください。

複数のユーザが同時にDBを利用する環境でいかにトランザクションを独立させて処理するかという問題を解決するための手段。
これが無いと複数のユーザーによる読み込みと更新が干渉して本来のデータでは無いものを読み書きしてしまう。


## 2. ACID 特性

トランザクションが必要とする特性に、ACID 特性があります。ACID 特性について、データベース初心者にわかるように説明してください。

守るべき標準規格で決められている約束事。
・Atomicity 原子性
実行されるか実行されないか二者択一な性質。all or nothing
・Consistency 一貫性
予め決めたものを変更しないような性質。
・Isolation 独立性
トランザクション同士が干渉しない性質。
・Durability 永続性
トランザクションが終了したらその時点でデータの状態が保存されることを保障する性質。

## 3. ロック

同時実行制御を行うための主要な方法がロックです。ロックとは何か、どのようにして同時実行制御を実現するかを、データベース初心者にわかるように説明してください。

トランザクションがほぼ同時に行われると
先のトランザクションがデータベースオブジェクトに対して後続の処理をブロックするという仕組みのこと。
そうすることでお互いのトランザクションの干渉を防ぐ
MySQLでのトランザクションは行単位のロック機能。

## 4. ロックの確認

ロックの挙動を確認しましょう。

ターミナルを2つ開き、両方とも employees データベースに接続してください。

片方のターミナル（ターミナル1）で、トランザクションを開始してください。給与テーブルに対して、従業員番号が10001で、開始日が1986-06-26の従業員の給与を70000に更新してください。

もう片方のターミナル（ターミナル2）で、給与テーブルに対して、従業員番号が10001で、開始日が1986-06-26の従業員の給与を2倍に更新してください。こちらのターミナルはクエリを実行されたまま停止することを確認してください。

ターミナル1で、従業員番号が10001で、開始日が1986-06-26の従業員の給与を検索してください。給与が70000のままロックされていることを確認しましょう。

ターミナル1で、コミットをします。

ターミナル2を開いてください。クエリが実行されているはずです。ターミナル2から従業員番号が10001で、開始日が1986-06-26の従業員の給与を検索してください。給与が2倍に更新されているはずです。

これがロックの基本の挙動です。他にもクエリを色々試してみて、ロックの挙動を確認してみてください。

